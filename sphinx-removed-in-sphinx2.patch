From b19243952f9a672b533d609d01d7919a9b370a05 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Miro=20Hron=C4=8Dok?= <miro@hroncok.cz>
Date: Thu, 14 Mar 2019 12:01:48 +0100
Subject: [PATCH] Add support for Sphinx 2

Fixes https://github.com/MrSenko/sphinx-removed-in/issues/5
---
 sphinx_removed_in/__init__.py | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/sphinx_removed_in/__init__.py b/sphinx_removed_in/__init__.py
index bba7c2d..51466a7 100644
--- a/sphinx_removed_in/__init__.py
+++ b/sphinx_removed_in/__init__.py
@@ -5,9 +5,15 @@ def setup(app):
     from sphinx.domains.changeset import versionlabels
     from sphinx.directives.other import VersionChange
 
+    try:
+        from sphinx.domains.changeset import versionlabel_classes
+    except ImportError:
+        versionlabel_classes = {}  # dummy dict for Sphinx < 2
+
     for _directive in ['versionremoved', 'removed-in']:
         if _directive not in versionlabels:
             versionlabels[_directive] = 'Removed in version %s'
+            versionlabel_classes[_directive] = 'removed'
             app.add_directive(_directive, VersionChange)
 
     return {'version': __version__}
